{"version":3,"file":"component---src-pages-avis-js-52a6a99b47d451ccd3f4.js","mappings":"6NAOMA,EAAOC,EAAAA,QAAAA,EAAAA,WAAH,yDAAGA,CAAH,0BACN,SAACC,GAAD,OAAWA,EAAMC,MAAMC,GAAGC,SAIf,SAASC,IACtB,IAAMC,GAAWC,EAAAA,EAAAA,eAGjB,OAFAC,EAAAA,EAAAA,IAAQF,GAGN,gBAACG,EAAA,EAAD,CAASL,OAAK,EAACM,OAAK,GAClB,gBAACD,EAAA,QAAD,6BAEE,2BAFF,kBAKA,gBAACV,EAAD,4GClBS,SAASY,IACtB,OACE,gBAACC,EAAA,EAAD,CAAKC,MAAO,qBACV,gBAACR,EAAD,S,gICGC,SAASG,EAAQF,GACtB,IAAOQ,GAAYC,EAAAA,EAAAA,IAAc,YAAjC,GACOC,GAAaD,EAAAA,EAAAA,IAAc,QAAlC,GACA,OAAOE,EAAAA,EAAAA,UACL,CAAC,UAAWH,EAAUE,IACtB,kBACEE,IAAAA,KAEOC,EAAAA,EAFP,eAE4BL,EAF5B,mBAEuDE,EACnD,KACA,CACEI,QAAS,CAAEC,OAAQ,uBAGtBC,MAAK,SAACC,GAAD,OAASA,EAAIC,UACvB,CACEC,WAASX,IAAYE,GACrBU,sBAAsB,IAoBrB,SAASC,IACd,OAAOC,EAAAA,EAAAA,cAAY,SAACC,EAAaC,GAAd,OACjBZ,IAAAA,KACKC,EAAAA,EADL,wBAEE,CAAEU,YAAAA,EAAaC,MAAAA,GACf,CACEV,QAAS,CACPC,OAAQ,oBACR,eAAgB","sources":["webpack://recosante-site/./src/components/Opinion.js","webpack://recosante-site/./src/pages/avis.js","webpack://recosante-site/./src/utils/api.js"],"sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\nimport { useLocation } from '@reach/router'\n\nimport { useAvis } from 'utils/api'\nimport Section from 'components/base/Section'\n\nconst Text = styled.p`\n  ${(props) => props.theme.mq.small} {\n    font-size: 1rem;\n  }\n`\nexport default function Opinion() {\n  const location = useLocation()\n  useAvis(location)\n\n  return (\n    <Section small first>\n      <Section.Title>\n        Votre avis a bien été\n        <br />\n        pris en compte\n      </Section.Title>\n      <Text>\n        Merci pour votre contribution ! C'est grâce à vos retours que nous\n        construisons un service utile !\n      </Text>\n    </Section>\n  )\n}\n","import React from 'react'\n\nimport Web from 'components/layout/Web'\nimport Opinion from 'components/Opinion'\n\nexport default function Avis() {\n  return (\n    <Web title={'Je donne mon avis'}>\n      <Opinion />\n    </Web>\n  )\n}\n","import { useQuery, useMutation } from 'react-query'\nimport axios from 'axios'\nimport { useQueryParam } from 'use-query-params'\n\nimport apiUrl from 'utils/apiUrl'\n\nexport function useStatistiques() {\n  return useQuery(['statistiques'], () =>\n    axios.get(`${apiUrl}/stats/`).then((res) => res.data)\n  )\n}\nexport function useAvis(location) {\n  const [short_id] = useQueryParam('short_id')\n  const [appliquee] = useQueryParam('avis')\n  return useQuery(\n    ['profile', short_id, appliquee],\n    () =>\n      axios\n        .post(\n          `${apiUrl}/newsletter/${short_id}/avis?appliquee=${appliquee}`,\n          null,\n          {\n            headers: { Accept: ' application/json' },\n          }\n        )\n        .then((res) => res.data),\n    {\n      enabled: short_id && appliquee ? true : false,\n      refetchOnWindowFocus: false,\n    }\n  )\n}\nexport function useAvisMutation() {\n  const [short_id] = useQueryParam('short_id')\n  const [appliquee] = useQueryParam('avis')\n  return useMutation((avis) =>\n    axios.post(\n      `${apiUrl}/newsletter/${short_id}/avis?appliquee=${appliquee}`,\n      avis,\n      {\n        headers: {\n          Accept: ' application/json',\n          'Content-Type': 'application/json',\n        },\n      }\n    )\n  )\n}\nexport function useInscriptionPatients() {\n  return useMutation((nom_medecin, mails) =>\n    axios.post(\n      `${apiUrl}/inscription-patients`,\n      { nom_medecin, mails },\n      {\n        headers: {\n          Accept: ' application/json',\n          'Content-Type': 'application/json',\n        },\n      }\n    )\n  )\n}\n"],"names":["Text","styled","props","theme","mq","small","Opinion","location","useLocation","useAvis","Section","first","Avis","Web","title","short_id","useQueryParam","appliquee","useQuery","axios","apiUrl","headers","Accept","then","res","data","enabled","refetchOnWindowFocus","useInscriptionPatients","useMutation","nom_medecin","mails"],"sourceRoot":""}