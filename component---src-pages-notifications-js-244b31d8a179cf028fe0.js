"use strict";(self.webpackChunkrecosante_site=self.webpackChunkrecosante_site||[]).push([[444],{6018:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(7294),a=n(9),i=n(9296),l=n(8309),o=n(4185),u=n(5279),s=a.default.div.withConfig({displayName:"MailInput__Wrapper",componentId:"sc-nlg17j-0"})(["position:relative;margin-bottom:1.5rem;font-size:1.375rem;","{font-size:1rem;}"],(function(e){return e.theme.mq.small})),c=a.default.label.withConfig({displayName:"MailInput__Label",componentId:"sc-nlg17j-1"})(["position:absolute;display:block;padding:0.5em 0.75em;transform:translateY(",");font-size:",";opacity:",";pointer-events:",";transition:all 200ms ease-out;"],(function(e){return e.small?"-100%":0}),(function(e){return e.small?"0.6em":"1em"}),(function(e){return e.small?"1":"0.7"}),(function(e){return e.small?"inherit":"none"})),m=(0,a.default)(u.Z).withConfig({displayName:"MailInput__Input",componentId:"sc-nlg17j-2"})(["margin:0;","{background-color:",";}"],(function(e){return e.theme.mq.small}),(function(e){return e.theme.colors.background}));function p(e){var t=(0,r.useState)(!1),n=t[0],a=t[1];return r.createElement(s,{className:e.className},e.label&&r.createElement(c,{htmlFor:e.name,small:n||e.value},e.label),r.createElement(m,{type:"email",name:e.name,value:e.value,onChange:e.onChange,onFocus:function(){return a(!0)},onBlur:function(){return a(!1)},required:!0}))}var f=a.default.form.withConfig({displayName:"UnloggedForm__Wrapper",componentId:"sc-b42dwl-0"})(["position:relative;display:flex;flex-direction:column;max-width:35.5rem;margin:0 auto;padding-top:1.5rem;"]),d=(0,a.default)(l.Z).withConfig({displayName:"UnloggedForm__Submit",componentId:"sc-b42dwl-1"})(["align-self:flex-end;font-size:1.25rem;","{font-size:1.125rem;}"],(function(e){return e.theme.mq.small})),v=a.default.p.withConfig({displayName:"UnloggedForm__Text",componentId:"sc-b42dwl-2"})([""]);function g(e){var t=(0,i.sX)(),n=(0,r.useState)(""),a=n[0],l=n[1];return r.createElement(f,{modal:e.modal,onSubmit:function(e){e.preventDefault(),t.mutate(a)}},e.unauthorized&&r.createElement(v,null,"Le délai pour utiliser ce lien a expiré."),r.createElement(v,null,"Entrez votre adresse email pour recevoir un lien vous permettant de changer vos préférences"),r.createElement(p,{type:"email",name:"email",label:"Votre email",value:a,onChange:function(e){var t=e.value;return l(t)}}),r.createElement(d,null,"Recevoir le lien"),t.isError&&r.createElement(o.Z,{error:!0},"Une erreur est survenue"),t.isSuccess&&r.createElement(o.Z,null,"Vous avez reçu un email contenant un lien pour modifier vos préférences"))}},8826:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(7294),a=n(9157),i=n(9339),l=n(5444),o=n(9296),u=n(8250),s=n(4134),c=n(4563),m=n(8309),p=n(4185),f=n(6018);function d(){var e=(0,s.Z)(),t=(0,l.useStaticQuery)("4202862713").applicationServerKey,n=(0,u.Z)("/sw.js",t.application_server_key),a=(0,i.Wd)("user")[0],d=(0,i.Wd)("token")[0],v=(0,o.aF)(),g=v.error,E=v.data,h=(0,o.tE)(),b=(0,r.useState)(!1),z=b[0],_=b[1];return a&&d&&!g?r.createElement(c.Z,{first:!0,small:!0},r.createElement("h1",null,"Activer les ",r.createElement("strong",null,"notifications"),r.createElement("br",null),"sur cet appareil"),E&&r.createElement(r.Fragment,null,"mail"===E.indicateurs_media[0]?r.createElement(r.Fragment,null,r.createElement("p",null,"Vous recevez pour l'instant les"," ",r.createElement("strong",null,"indicateurs par mail"),"."),e?r.createElement("p",null,"Malheureusement les notifications ne sont pas disponibles sur iOS (iPhone et iPad). Vous pouvez ouvrir cette page sur un autre appareil si vous le souhaitez."):r.createElement("p",null,"Si vous souhaitez changer pour activer les notifications sur cet appareil, cliquez ci-dessous (vous ne recevrez plus de mail).")):z?r.createElement("p",null,"Vous recevrez maintenant les"," ",r.createElement("strong",null,"indicateurs par notifications")," sur cet appareil !"):r.createElement(r.Fragment,null,r.createElement("p",null,"Vous recevez pour l'instant les"," ",r.createElement("strong",null,"indicateurs par notifications.")),e?r.createElement("p",null,"Malheureusement les notifications ne sont pas disponibles sur iOS (iPhone et iPad). Vous pouvez ouvrir cette page sur un autre appareil ou modifier votre profil pour choisir de les recevoir par mail."):r.createElement("p",null,"Si vous souhaitez les recevoir sur cet appareil en particulier, cliquez ci-dessous (vous continuerez de les recevoir sur vos autres appareils)")),r.createElement(m.Z.Wrapper,{vertical:!0},!z&&!e&&r.createElement(m.Z,{fetching:n.prompting,onClick:function(){n.subscribe().then((function(e){e&&(_(!0),h.mutate({indicateurs_media:["notifications_web"],webpush_subscriptions_info:JSON.stringify(e)}))}))}},"Activer les notifications sur cet appareil"),r.createElement(m.Z,{to:"/profil/?user="+a+"&token="+d,hollow:!0},"Voir mon profil"))),n.error&&r.createElement(p.Z,{error:!0},"Vous devez accepter les notifications web pour pouvoir continuer"),h.isError&&r.createElement(p.Z,{error:!0},"Une erreur est survenue. Vos préférences n'ont pas été mises à jour")):r.createElement(c.Z,{first:!0},r.createElement(f.Z,{unauthorized:!!g}))}function v(){return r.createElement(a.Z,{title:"Notifications Web"},r.createElement(d,null))}}}]);
//# sourceMappingURL=component---src-pages-notifications-js-244b31d8a179cf028fe0.js.map