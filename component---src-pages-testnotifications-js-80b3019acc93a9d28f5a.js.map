{"version":3,"file":"component---src-pages-testnotifications-js-80b3019acc93a9d28f5a.js","mappings":"4OASe,SAASA,IACtB,IAAMC,GAAOC,EAAAA,EAAAA,gBAAe,cAStBC,GAAYC,EAAAA,EAAAA,GAChBH,EAAKI,qBAAqBC,wBAGtBC,GAAgBC,EAAAA,EAAAA,GAAuB,SAAUL,GAEvD,OACE,gBAAC,IAAD,CAAKM,MAAO,QACV,gBAAC,IAAD,CAASC,OAAK,EAACC,OAAK,GAClB,gBAAC,YAAD,KACE,gBAAC,IAAD,CACEC,QAAS,kBACPL,EACGM,YACAC,MAAK,SAACC,GAAD,OAAsBC,QAAQC,IAAIF,QAJ9C,kBASA,gBAAC,IAAD,CACEH,QAAS,WACP,IACMM,EAAU,CACdC,KAAK,qCACLlB,KAAM,iCACNmB,KAAM,eACNC,QAAS,CACP,CACEC,OAAQ,iCACRb,MAAO,+BAIbc,UAAUC,cAAcC,MAAMX,MAAK,SAAUU,GAC3CR,QAAQC,IAAI,0BACZO,EAAcE,iBAdF,gCAc0BR,MAExCF,QAAQC,IAAI,cAlBhB,iBAuBA,gBAAC,IAAD,CACEL,QAAS,WACP,IACMM,EAAU,GAChBK,UAAUC,cAAcC,MAAMX,MAAK,SAAUU,GAC3CR,QAAQC,IAAI,0BACZO,EAAcE,iBAJF,gCAI0BR,MAExCF,QAAQC,IAAI,cARhB","sources":["webpack://recosante-site/./src/pages/testnotifications.js"],"sourcesContent":["import React from 'react'\nimport { useStaticQuery, graphql } from 'gatsby'\n\nimport useUrlB64ToUint8Array from 'hooks/useUrlB64ToUint8Array'\nimport useNotificationsPrompt from 'hooks/useNotificationsPrompt'\nimport Web from 'components/layout/Web'\nimport Section from 'components/base/Section'\nimport Button from 'components/base/Button'\n\nexport default function TestNotifications() {\n  const data = useStaticQuery(\n    graphql`\n      query {\n        applicationServerKey {\n          application_server_key\n        }\n      }\n    `\n  )\n  const publicKey = useUrlB64ToUint8Array(\n    data.applicationServerKey.application_server_key\n  )\n\n  const notifications = useNotificationsPrompt('/sw.js', publicKey)\n\n  return (\n    <Web title={'Test'}>\n      <Section first small>\n        <Button.Wrapper>\n          <Button\n            onClick={() =>\n              notifications\n                .subscribe()\n                .then((pushSubscription) => console.log(pushSubscription))\n            }\n          >\n            Souscris moi !\n          </Button>\n          <Button\n            onClick={() => {\n              const title = 'Toulouse, le vendredi 23 juin'\n              const options = {\n                body: `Indice de qualitÃ© de l'air : Moyen`,\n                data: 'https://recosante.beta.gouv.fr',\n                icon: '/favicon.png',\n                actions: [\n                  {\n                    action: 'https://recosante.beta.gouv.fr',\n                    title: 'Voir tous les indicateurs',\n                  },\n                ],\n              }\n              navigator.serviceWorker.ready.then(function (serviceWorker) {\n                console.log('serviceWorker is ready')\n                serviceWorker.showNotification(title, options)\n              })\n              console.log('notified')\n            }}\n          >\n            Notifie moi !\n          </Button>\n          <Button\n            onClick={() => {\n              const title = 'Toulouse, le vendredi 23 juin'\n              const options = {}\n              navigator.serviceWorker.ready.then(function (serviceWorker) {\n                console.log('serviceWorker is ready')\n                serviceWorker.showNotification(title, options)\n              })\n              console.log('notified')\n            }}\n          >\n            Notifie moi, mais mal\n          </Button>\n        </Button.Wrapper>\n      </Section>\n    </Web>\n  )\n}\n"],"names":["TestNotifications","data","useStaticQuery","publicKey","useUrlB64ToUint8Array","applicationServerKey","application_server_key","notifications","useNotificationsPrompt","title","first","small","onClick","subscribe","then","pushSubscription","console","log","options","body","icon","actions","action","navigator","serviceWorker","ready","showNotification"],"sourceRoot":""}