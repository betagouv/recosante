"use strict";(self.webpackChunkrecosante_site=self.webpackChunkrecosante_site||[]).push([[591],{8047:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var i=t(7294),a=t(5444),o=t(6725),r=t(9),l=t(9157),c=t(4563),u=t(8309),m=t(1504),d=t(686),s=t(6633),v=t.n(s),_=t(7711);var f=t(5678),g=t(2659),p=t(858),h=t(1361),b=t(540),y=r.default.div.withConfig({displayName:"Recommandations__Options",componentId:"sc-f30ir7-0"})(["position:relative;display:flex;flex-wrap:wrap;justify-content:flex-start;margin:2rem auto;","{flex-direction:column;justify-content:flex-start;align-items:stretch;}"],(function(e){return e.theme.mq.small})),E=r.default.svg.withConfig({displayName:"Recommandations__NoIcon",componentId:"sc-f30ir7-1"})(["width:auto;height:0rem;"]),V=r.default.h2.withConfig({displayName:"Recommandations__Type",componentId:"sc-f30ir7-2"})(["margin-bottom:2rem;"]),x=r.default.h3.withConfig({displayName:"Recommandations__Critere",componentId:"sc-f30ir7-3"})(["margin-bottom:1.5rem;"]),C=r.default.h4.withConfig({displayName:"Recommandations__SousCritere",componentId:"sc-f30ir7-4"})(["margin-bottom:1rem;color:",";"],(function(e){return e.theme.colors.text})),k=r.default.div.withConfig({displayName:"Recommandations__Recommandation",componentId:"sc-f30ir7-5"})(['margin-bottom:1rem;&:not(:last-child):after{content:" ";display:block;border-bottom:2px solid transparent;border-image:linear-gradient(to right,#fff 0 25%,',",#fff 75% 100%);border-image-slice:1;}"],(function(e){return e.theme.colors.main}));function I(e){var n={episode_pollution:"Épisode de pollution",indice_atmo:"Qualité de l’air",pollens:"Risque d’allergie aux pollens",vigilance_meteo:"Vigilance météo",indice_uv:"Indice UV",baignades:"Qualité des eaux de baignade",radon:"Potentiel Radon"},t=[];Object.keys(n).map((function(e){return t.push({value:e,label:n[e],icon:"indice_atmo"===e?i.createElement(g.Z,null):"pollens"===e?i.createElement(p.Z,null):"vigilance_meteo"===e?i.createElement(b.Z,null):"indice_uv"===e?i.createElement(h.Z,null):i.createElement(E,null)})}));var a,o,r=(0,d.useQuery)(["recommandations"],(function(){return v().get(_.Z+"/v1/recommandations").then((function(e){return e.data}))}),{enabled:!0,keepPreviousData:!0,refetchOnWindowFocus:!1}).data,l={},c=(a=r||e.recommandations,o="type",a.reduce((function(e,n){var t,i=n[o];return null!==(t=e[i])&&void 0!==t||(e[i]=[]),e[i].push(n),e}),{})),u=function(e){var n;return null===(n=c.episode_pollution)||void 0===n?void 0:n.filter((function(n){return n.ozone===e}))};l.episode_pollution={ozone:u(!0),pas_ozone:u(!1)};var s=function(e,n){return e.categorie<n.categorie?1:-1},I=function(e){var n;return null===(n=c.indice_atmo)||void 0===n?void 0:n.filter((function(n){return!0===n[e]})).sort(s)};l.indice_atmo={qa_bonne:I("qa_bonne"),qa_mauvaise:I("qa_mauvaise"),qa_evenement:I("qa_evenement")};var w=function(e){var n;return null===(n=c.pollens)||void 0===n?void 0:n.filter((function(n){return n.min_raep===e}))};l.pollens={raep_0:w(0),"raep_1-3":w(1),"raep_4-5":w(4)};var q=function(e,n){return e.vigilance_phenomene_ids>n.vigilance_phenomene_ids?1:-1},R=function(e){var n;return null===(n=c.vigilance_meteo)||void 0===n?void 0:n.filter((function(n){var t;return null===(t=n.vigilance_couleur_ids)||void 0===t?void 0:t.includes(e)})).sort(q)};l.vigilance_meteo={vigilance_verte:R(1),vigilance_jaune:R(2),vigilance_orange:R(3),vigilance_rouge:R(4)};var Z=function(e){var n;return null===(n=c.indice_uv)||void 0===n?void 0:n.filter((function(n){return n.min_indice_uv===e}))};l.indice_uv={indice_uv_0:Z(0),"indice_uv_1-2":Z(1),"indice_uv_3-5":Z(3),"indice_uv_6-7":Z(6),"indice_uv_8-10":Z(8),"indice_uv_11+":Z(11)},l.baignades={tous:c.baignades},l.radon={tous:c.radon};var N={1:"Vent violent",2:"Pluie-Inondation",3:"Orages",4:"Crues",5:"Neige-verglas",6:"Canicule",7:"Grand Froid",8:"Avalanches",9:"Vagues-Submersion"},U={ozone:"Pollution à l’ozone",pas_ozone:"Pollution au dioxyde d’azote, au dioxyde de soufre ou aux particules fines",qa_bonne:"Indice ATMO bon (1) ou moyen (2)",qa_mauvaise:"Indice ATMO de dégradé (3) à extrêmement mauvais (6)",qa_evenement:"Événement (7)",raep_0:"RAEP nul (0)","raep_1-3":"RAEP très faible (1), faible (2) ou moyen (3)","raep_4-5":"RAEP élevé (4) ou très élevé (5)",vigilance_verte:"Vigilance verte",vigilance_jaune:"Vigilance jaune",vigilance_orange:"Vigilance orange",vigilance_rouge:"Vigilance rouge",indice_uv_0:"Nul (UV 0)","indice_uv_1-2":"Faible (de UV 1 à UV 2)","indice_uv_3-5":"Modéré (de UV 3 à UV 5)","indice_uv_6-7":"Fort (de UV 6 à UV 7)","indice_uv_8-10":"Très fort (de UV 8 à UV 10)","indice_uv_11+":"Extrême (UV 11 et plus)"},j={qa_bonne:[],qa_mauvaise:[]},O=(0,i.useState)(Object.keys(n)),z=O[0],P=O[1];return i.createElement(i.Fragment,null,i.createElement(y,null,t.map((function(e){return i.createElement(f.Z,{key:e.value,option:e,active:z.includes(e.value),onClick:function(){var n=z;z.includes(e.value)?z.length>1&&(n=z.filter((function(n){return n!==e.value}))):n=[].concat((0,m.Z)(z),[e.value]),P(n)}})}))),Object.keys(n).map((function(e){return i.createElement("section",{id:e,key:e},l[e]&&z.includes(e)&&i.createElement(i.Fragment,null,i.createElement(V,null,n[e]),Object.keys(l[e]).map((function(n){var t;return i.createElement("section",{id:e+"-"+n,key:e+"-"+n},i.createElement(x,null,U[n]),null===(t=l[e][n])||void 0===t?void 0:t.map((function(t,a){return i.createElement(i.Fragment,{key:e+"-"+n+"-"+a},"indice_atmo"===e&&(t.categorie||(t.categorie="Toute catégorie"))&&j[n]&&!j[n].includes(t.categorie)&&j[n].push(t.categorie)&&i.createElement(C,null,t.categorie),"vigilance_meteo"===e&&i.createElement(C,null,N[t.vigilance_phenomene_ids]),i.createElement(k,{dangerouslySetInnerHTML:{__html:t.recommandation}}))})))}))))})))}var w=r.default.h1.withConfig({displayName:"recommandations__Title",componentId:"sc-17obuap-0"})(["color:",";font-size:3.25rem;margin:2rem 0;"],(function(e){return e.theme.colors.main})),q=r.default.div.withConfig({displayName:"recommandations__Introduction",componentId:"sc-17obuap-1"})(["background-color:#eef1f7;padding:2rem;margin-bottom:2rem;p{margin-bottom:0;}"]);function R(e){var n=(0,a.useStaticQuery)("533908022");return i.createElement(l.Z,{title:n.mdx.frontmatter.title},i.createElement(c.Z,{first:!0,medium:!0},i.createElement(w,null,n.mdx.frontmatter.title),i.createElement(q,null,i.createElement(o.MDXRenderer,null,n.mdx.body)),i.createElement(I,{recommandations:e.pageContext.recommandations}),i.createElement(u.Z.Wrapper,{center:!0},i.createElement(u.Z,{to:_.Z+"/v1/recommandations.csv"},"Télécharger au format CSV"))))}}}]);
//# sourceMappingURL=component---src-templates-recommandations-js-a44cf00fbebca8f6c788.js.map